.TH "/lfs/h2/emc/global/noscrub/George.Gayno/ufs_utils.git/UFS_UTILS.upstream/sorc/emcsfc_snow2mdl.fd/driver.F90" 3 "Tue Jan 17 2023" "Version 1.9.0" "emcsfc_snow2mdl" \" -*- nroff -*-
.ad l
.nh
.SH NAME
/lfs/h2/emc/global/noscrub/George.Gayno/ufs_utils.git/UFS_UTILS.upstream/sorc/emcsfc_snow2mdl.fd/driver.F90 \- Create a snow cover and snow depth analysis\&.  

.SH SYNOPSIS
.br
.PP
.SS "Functions/Subroutines"

.in +1c
.ti -1c
.RI "program \fBdriver\fP"
.br
.RI "Create a snow cover and snow depth analysis on a nam or global gfs gaussian grid using nesdis/ims snow cover, autosnow snow cover and/or afwa depth data\&. "
.in -1c
.SH "Detailed Description"
.PP 
Create a snow cover and snow depth analysis\&. 


.PP
\fBAuthor:\fP
.RS 4
gayno 
.RE
.PP
\fBDate:\fP
.RS 4
2005-dec-16 
.RE
.PP

.PP
Definition in file \fBdriver\&.F90\fP\&.
.SH "Function/Subroutine Documentation"
.PP 
.SS "program driver ()"

.PP
Create a snow cover and snow depth analysis on a nam or global gfs gaussian grid using nesdis/ims snow cover, autosnow snow cover and/or afwa depth data\&. The ims snow cover product is now produced by the national ice center, not nesdis\&. however, in this code, references to ims still use the 'nesdis' identifier\&.
.PP
input files, to define model grid, and for runtime configuration:
.IP "\(bu" 2
fort\&.41 configuration namelist
.IP "\(bu" 2
latitudes on model grid (grib 1 or grib 2)
.IP "\(bu" 2
longitudes on model grid (grib 1 or grib 2)
.IP "\(bu" 2
model land/sea mask (grib 1 or grib 2)
.IP "\(bu" 2
gfs definition of reduced grid (ascii, optional)
.PP
.PP
input snow data files; see remarks section on how to select\&.
.IP "\(bu" 2
nesdis/ims nh 4km (96 mesh) snow cover data (grib1 or grib 2)
.IP "\(bu" 2
nesdis/ims nh 23km (16 mesh) snow cover data (grib1 or grib 2)
.IP "\(bu" 2
nesdis/ims nh 23km land mask (ascii, required when using 23km ims)
.IP "\(bu" 2
afwa nh/sh 8th mesh (46km) snow depth data (binary)
.IP "\(bu" 2
afwa nh/sh 8th mesh land/sea mask (binary, required when using 8th mesh nh/sh afwa data)
.IP "\(bu" 2
afwa nh/sh 16th mesh (23km) snow depth data (grib 1)
.IP "\(bu" 2
autosnow sh snow cover data (grib 2)
.IP "\(bu" 2
nesdis/ims weekly nh snow cover climatology (grib 2) (used to qc input snow data)\&.
.PP
.PP
output files: 
.br
 - snow cover and depth on the model grid (grib1 or grib2)
.PP
exit states (non-zero condition is fatal):
.IP "\(bu" 2
0 - successful run
.IP "\(bu" 2
40 - bad open of file when checking its file type (routine grib_check)\&.
.IP "\(bu" 2
41 - ims file not grib1 or grib2 format
.IP "\(bu" 2
47 - error in grib2_check\&. unknown grid type\&.
.IP "\(bu" 2
48 - error creating model output grib2 file
.IP "\(bu" 2
49 - bad open of model output grib2 file
.IP "\(bu" 2
50 - error converting to grib2 grid description template
.IP "\(bu" 2
53 - bad nesdis/ims data\&. 
.br
 - 54 - bad input snow data selection
.IP "\(bu" 2
55 - error in iplib interpolation routine
.IP "\(bu" 2
57 - bad write of model snow depth data to grib1 file
.IP "\(bu" 2
58 - bad write of model snow cover data to grib1 file
.IP "\(bu" 2
59 - bad open of model output grib1 file
.IP "\(bu" 2
60 - bad open afwa snow data
.IP "\(bu" 2
61 - bad read afwa snow data
.IP "\(bu" 2
62 - bad open afwa land mask
.IP "\(bu" 2
63 - bad read afwa land mask
.IP "\(bu" 2
70 - bad degrib of nesdis/ims snow cover data
.IP "\(bu" 2
71 - bad degrib of nesdis/ims sea ice data
.IP "\(bu" 2
72 - bad degrib of nesdis/ims data header
.IP "\(bu" 2
73 - bad open of nesdis/ims data
.IP "\(bu" 2
74 - bad open of autosnow data
.IP "\(bu" 2
75 - bad degrib of autosnow data
.IP "\(bu" 2
76 - problem with gfs 'lonsperlat' file
.IP "\(bu" 2
77 - bad open on configuration namelist
.IP "\(bu" 2
78 - bad read on configuration namelist
.IP "\(bu" 2
79 - unrecognized model grid type
.IP "\(bu" 2
80 - bad open on model latitude grib file
.IP "\(bu" 2
81 - bad read on model latitude grib header
.IP "\(bu" 2
82 - bad degrib of model latitude data
.IP "\(bu" 2
83 - bad open on model longitude file
.IP "\(bu" 2
84 - bad degrib of model longitude data
.IP "\(bu" 2
85 - bad open of model land mask file
.IP "\(bu" 2
86 - bad degrib of model land mask data
.IP "\(bu" 2
87 - bad open of nesdis/ims land mask file
.IP "\(bu" 2
88 - bad read of nesdis/ims land mask data
.IP "\(bu" 2
90 - model latitude file not grib1 or grib2
.IP "\(bu" 2
91 - model longitude file not grib1 or grib2
.IP "\(bu" 2
92 - model land mask file not grib1 or grib2
.PP
.PP
The determination of cover and depth on the model grid depends on the input snow data selected:
.PP
nam grids:
.PP
.IP "1." 4
nesdis/ims only - An analysis of snow cover on the model grid is produced\&. No depth analysis is produced\&.
.IP "2." 4
afwa only - An analysis of snow cover and depth on the model grid is produced\&. Depth is determined from the afwa data\&. Cover is set to 100% where afwa indicates snow and 0% otherwise\&.
.IP "3." 4
nesdis/ims and afwa - An analysis of snow cover and depth on the model grid is produced\&. Cover is determined by the nesdis/ims data\&. If cover is greater than user-defined threshold (variable snow_cvr_threshold) the depth is set to the afwa value or a nominal value, whichever is greater\&. The nominal value is user-defined (varaible min_snow_depth)\&. If cover is less than user- defined threshold, the depth is set to 0, regardless of the afwa depth value\&.
.PP
.PP
gfs grid:
.PP
.IP "1." 4
nesdis/ims and autosnow only - An analysis of snow cover and depth on the model grid is produced\&. 
.br
 Cover is determined from the ims and autosnow data\&. If cover is greater than the user-defined threshold (variable snow_cvr_threshold), the the depth is set to the user-defined default depth (variable min_snow_depth)\&.
.IP "2." 4
afwa only - An analysis of snow cover and depth on the model grid is produced\&. Depth is determined from the afwa data\&. Cover is set to 100% where afwa indicates snow and 0% otherwise\&.
.IP "3." 4
nesdis/ims, autosnow and afwa - An analysis of snow cover and depth on the model grid is produced\&. Cover is determined by the ims and autosnow data\&. If cover is greater than user-defined threshold (variable snow_cvr_threshold) the depth is set to the afwa value or a nominal value, whichever is greater\&. The nominal value is user-defined (varaible min_snow_depth)\&. If cover is less than user- defined threshold, the depth is set to 0, regardless of the afwa depth value\&.
.PP
.PP
Program History Log
.IP "\(bu" 2
2005-dec-16 gayno initial version
.IP "\(bu" 2
2007-nov-30 gayno added processing of nam b-grids\&. improved thinning for gfs grids\&.
.IP "\(bu" 2
2008-feb-01 gayno added option to use autosnow data in southern hemisphere\&.
.IP "\(bu" 2
2014-feb-14 gayno read grib 1 or grib2 version of nesdis/ims data
.IP "\(bu" 2
2014-sep-30 gayno read grib 1 or grib2 version of model lat, lon and mask files\&. convert nh weekly snow climatology to grib 2\&. option to output model depth and cover analysis in grib2\&.
.PP
.PP
\fBReturns:\fP
.RS 4
0 for success, error code otherwise\&. 
.br
 
.RE
.PP
\fBAuthor:\fP
.RS 4
gayno 
.RE
.PP
\fBDate:\fP
.RS 4
2005-dec-16 
.RE
.PP

.PP
Definition at line 144 of file driver\&.F90\&.
.PP
References snow2mdl::interp(), model_grid::model_grid_cleanup(), program_setup::read_config_nml(), model_grid::read_mdl_grid_info(), snowdat::readafwa(), snowdat::readautosnow(), and snowdat::readnesdis()\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for emcsfc_snow2mdl from the source code\&.

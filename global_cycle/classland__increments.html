<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>global_cycle: land_increments Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">global_cycle
   &#160;<span id="projectnumber">1.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classland__increments.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">land_increments Module Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae260c4c211018b060db3dfb15fdf74d6"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#ae260c4c211018b060db3dfb15fdf74d6">add_increment_snow</a> (snd_inc, mask, lensfc, snd)</td></tr>
<tr class="memdesc:ae260c4c211018b060db3dfb15fdf74d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add snow depth increment to model snow depth state, and limit output to be non-negative.  <a href="#ae260c4c211018b060db3dfb15fdf74d6">More...</a><br/></td></tr>
<tr class="separator:ae260c4c211018b060db3dfb15fdf74d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af307e07315cbcac6e88643185ae2224f"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#af307e07315cbcac6e88643185ae2224f">add_increment_soil</a> (rla, rlo, stc_state, soilsnow_tile, soilsnow_fg_tile, lensfc, lsoil, idim, jdim, myrank)</td></tr>
<tr class="memdesc:af307e07315cbcac6e88643185ae2224f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in gsi file with soil state increments (on the gaussian grid), interpolate increments to the cubed-sphere tile, and add to the soil states.  <a href="#af307e07315cbcac6e88643185ae2224f">More...</a><br/></td></tr>
<tr class="separator:af307e07315cbcac6e88643185ae2224f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46cacafd29fb14ec2945614634e35478"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#a46cacafd29fb14ec2945614634e35478">apply_land_da_adjustments_snd</a> (lsm, lensfc, mask, swe_bck, snd_bck, snd_anl, swe_adj)</td></tr>
<tr class="memdesc:a46cacafd29fb14ec2945614634e35478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make adjustments to dependent variables after applying land increments.  <a href="#a46cacafd29fb14ec2945614634e35478">More...</a><br/></td></tr>
<tr class="separator:a46cacafd29fb14ec2945614634e35478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c5427f348282048617597ba4f08549"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#a40c5427f348282048617597ba4f08549">apply_land_da_adjustments_stc</a> (lsm, isot, ivegsrc, lensfc, lsoil, rsoiltype, mask, stc_bck, stc_anl, smc_adj, slc_adj)</td></tr>
<tr class="memdesc:a40c5427f348282048617597ba4f08549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make adjustments to dependent variables after applying land increments.  <a href="#a40c5427f348282048617597ba4f08549">More...</a><br/></td></tr>
<tr class="separator:a40c5427f348282048617597ba4f08549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af965fc620e3a6d871e762d0adc67f386"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#af965fc620e3a6d871e762d0adc67f386">calculate_landinc_mask</a> (smc, swe, vtype, lensfc, veg_type_landice, mask)</td></tr>
<tr class="memdesc:af965fc620e3a6d871e762d0adc67f386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate soil mask for land on model grid.  <a href="#af965fc620e3a6d871e762d0adc67f386">More...</a><br/></td></tr>
<tr class="separator:af965fc620e3a6d871e762d0adc67f386"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad787f5e08101bfd383fcd6abfece6695"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classland__increments.html#ad787f5e08101bfd383fcd6abfece6695">lsm_noah</a> =1</td></tr>
<tr class="memdesc:ad787f5e08101bfd383fcd6abfece6695"><td class="mdescLeft">&#160;</td><td class="mdescRight">flag for NOAH land surface model copied from GFS_typedefs.F90  <a href="#ad787f5e08101bfd383fcd6abfece6695">More...</a><br/></td></tr>
<tr class="separator:ad787f5e08101bfd383fcd6abfece6695"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00005">5</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a class="anchor" id="ae260c4c211018b060db3dfb15fdf74d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public land_increments::add_increment_snow </td>
          <td>(</td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>snd_inc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lensfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(inout)&#160;</td>
          <td class="paramname"><em>snd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add snow depth increment to model snow depth state, and limit output to be non-negative. </p>
<p>JEDI increments are calculated globally, so must be screened to land-only locations here.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lensfc</td><td>Number of land points on this tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">snd_inc</td><td>Soil depth increments </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Land mask for increments </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">snd</td><td>Soil depth background (in), and analysis (out)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Clara Draper. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>August 2021 </dd></dl>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00314">314</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

<p>Referenced by <a class="el" href="cycle_8f90_source.html#l00304">sfcdrv()</a>.</p>

</div>
</div>
<a class="anchor" id="af307e07315cbcac6e88643185ae2224f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public land_increments::add_increment_soil </td>
          <td>(</td>
          <td class="paramtype">real, dimension(lensfc), intent(inout)&#160;</td>
          <td class="paramname"><em>rla</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(inout)&#160;</td>
          <td class="paramname"><em>rlo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc, lsoil), intent(inout)&#160;</td>
          <td class="paramname"><em>stc_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>soilsnow_tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>soilsnow_fg_tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lensfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lsoil</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jdim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>myrank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read in gsi file with soil state increments (on the gaussian grid), interpolate increments to the cubed-sphere tile, and add to the soil states. </p>
<p>Adapted from adjust_nsst. Currently only coded for soil temperature. Soil moisture will need the model soil moisture paramaters for regridding.</p>
<p>Does not make a temperature update if snow differ between fg and anal (allow correction of snow to address temperature error first), or if snow is present (will eventually updating of snow temperature in this case)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">RLA</td><td>Latitude on the cubed-sphere tile </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">RLO</td><td>Longitude on the cubed-sphere tile </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">STC_STATE</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SOILSNOW_TILE</td><td>Land mask for increments on the cubed-sphere tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SOILSNOW_FG_TILE</td><td>First guess land mask for increments on the cubed-sphere tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LENSFC</td><td>Number of land points on a tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LSOIL</td><td>Number of soil layers </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IDIM</td><td>'I' dimension of a tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JDIM</td><td>'J' dimension of a tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">MYRANK</td><td>MPI rank number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Clara Draper. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 2021 </dd></dl>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00043">43</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

<p>References <a class="el" href="utils_8F90_source.html#l00038">utils::remap_coef()</a>.</p>

<p>Referenced by <a class="el" href="cycle_8f90_source.html#l00304">sfcdrv()</a>.</p>

</div>
</div>
<a class="anchor" id="a46cacafd29fb14ec2945614634e35478"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public land_increments::apply_land_da_adjustments_snd </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lensfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>swe_bck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>snd_bck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>snd_anl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(inout)&#160;</td>
          <td class="paramname"><em>swe_adj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make adjustments to dependent variables after applying land increments. </p>
<p>These adjustments are model-dependent, and are currently only coded for Noah LSM. Here: adjust SWE to be consistent with updated SND, using snow density from the forecast. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lsm</td><td>Integer code for the LSM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lensfc</td><td>Number of land points for this tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Land mask for increments </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">swe_bck</td><td>Background SWE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">snd_bck</td><td>Background snow depth </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">snd_anl</td><td>Analysis snow depth </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">swe_adj</td><td>SWE to be adjusted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Clara Draper </dd></dl>
<dl class="section date"><dt>Date</dt><dd>August 2021 </dd></dl>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00482">482</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

<p>Referenced by <a class="el" href="cycle_8f90_source.html#l00304">sfcdrv()</a>.</p>

</div>
</div>
<a class="anchor" id="a40c5427f348282048617597ba4f08549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public land_increments::apply_land_da_adjustments_stc </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>isot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ivegsrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lensfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lsoil</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>rsoiltype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc, lsoil), intent(in)&#160;</td>
          <td class="paramname"><em>stc_bck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc, lsoil), intent(in)&#160;</td>
          <td class="paramname"><em>stc_anl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc,lsoil), intent(inout)&#160;</td>
          <td class="paramname"><em>smc_adj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc,lsoil), intent(inout)&#160;</td>
          <td class="paramname"><em>slc_adj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make adjustments to dependent variables after applying land increments. </p>
<p>These adjustments are model-dependent, and are currently only coded for Noah LSM. For Noah LSM, copy relevent code blocks from model code (same as has been done in sfc_sub). Here: adjust (frozen) soil moisture to be consistent with changes in soil temperature from DA </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lsm</td><td>Integer code for the LSM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isot</td><td>Integer code for the soil type data set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ivegsrc</td><td>Integer code for the vegetation type data set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lensfc</td><td>Number of land points for this tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lsoil</td><td>Number of soil layers </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rsoiltype</td><td>Array of input soil types </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Mask indicating surface type </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stc_bck</td><td>Background soil temperature states </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stc_anl</td><td>Analysis soil temperature states </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">smc_adj</td><td>Soil moisture state to be adjusted </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">slc_adj</td><td>Liquid soil moisture states to be adjusted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Clara Draper </dd></dl>
<dl class="section date"><dt>Date</dt><dd>April 2021 </dd></dl>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00394">394</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

<p>References <a class="el" href="cycle_8f90_source.html#l01904">tfreez()</a>.</p>

<p>Referenced by <a class="el" href="cycle_8f90_source.html#l00304">sfcdrv()</a>.</p>

</div>
</div>
<a class="anchor" id="af965fc620e3a6d871e762d0adc67f386"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public land_increments::calculate_landinc_mask </td>
          <td>(</td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>smc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>swe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(lensfc), intent(in)&#160;</td>
          <td class="paramname"><em>vtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lensfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>veg_type_landice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(lensfc), intent(out)&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate soil mask for land on model grid. </p>
<p>Output is 1 - soil, 2 - snow-covered, 0 - land ice, -1 not land.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lensfc</td><td>Number of land points for this tile </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">veg_type_landice</td><td>Value of vegetion class that indicates land-ice </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">smc</td><td>Model soil moisture. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">swe</td><td>Model snow water equivalent </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vtype</td><td>Model vegetation type </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Land mask for increments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Clara Draper </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 2021 </dd></dl>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00344">344</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

<p>Referenced by <a class="el" href="cycle_8f90_source.html#l00304">sfcdrv()</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="ad787f5e08101bfd383fcd6abfece6695"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter land_increments::lsm_noah =1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>flag for NOAH land surface model copied from GFS_typedefs.F90 </p>

<p>Definition at line <a class="el" href="land__increments_8f90_source.html#l00015">15</a> of file <a class="el" href="land__increments_8f90_source.html">land_increments.f90</a>.</p>

</div>
</div>
<hr/>The documentation for this module was generated from the following file:<ul>
<li>/gpfs/dell2/emc/modeling/noscrub/George.Gayno/ufs_utils.git/UFS_UTILS.upstream/UFS_UTILS/sorc/global_cycle.fd/<a class="el" href="land__increments_8f90_source.html">land_increments.f90</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classland__increments.html">land_increments</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
